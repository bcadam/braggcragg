var FlipClock;!function(t){"use strict";FlipClock=function(t,i,s){return new FlipClock.Factory(t,i,s)},FlipClock.Lang={},FlipClock.Base=Base.extend({buildDate:"2013-11-07",version:"0.3.1",constructor:function(i,s){"object"!=typeof i&&(i={}),"object"!=typeof s&&(s={}),this.setOptions(t.extend(!0,{},i,s))},callback:function(t){if("function"==typeof t){for(var i=[],s=1;s<=arguments.length;s++)arguments[s]&&i.push(arguments[s]);t.apply(this,i)}},log:function(t){window.console&&console.log&&console.log(t)},getOption:function(t){return this[t]?this[t]:!1},getOptions:function(){return this},setOption:function(t,i){this[t]=i},setOptions:function(t){for(var i in t)"undefined"!=typeof t[i]&&this.setOption(i,t[i])}}),FlipClock.Factory=FlipClock.Base.extend({autoStart:!0,callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},classes:{active:"flip-clock-active",before:"flip-clock-before",divider:"flip-clock-divider",dot:"flip-clock-dot",label:"flip-clock-label",flip:"flip",play:"play",wrapper:"flip-clock-wrapper"},clockFace:"HourlyCounter",defaultClockFace:"HourlyCounter",defaultLanguage:"english",language:"english",lang:!1,face:!0,running:!1,time:!1,timer:!1,lists:[],$wrapper:!1,constructor:function(i,s,e){this.lists=[],this.running=!1,this.base(e),this.$wrapper=t(i).addClass(this.classes.wrapper),this.time=new FlipClock.Time(this,s?Math.round(s):0),this.timer=new FlipClock.Timer(this,e),this.lang=this.loadLanguage(this.language),this.face=this.loadClockFace(this.clockFace,e),this.autoStart&&this.start()},loadClockFace:function(t,i){var s,e="Face";return t=t.ucfirst()+e,s=FlipClock[t]?new FlipClock[t](this,i):new FlipClock[this.defaultClockFace+e](this,i),s.build(),s},loadLanguage:function(t){var i;return i=FlipClock.Lang[t.ucfirst()]?FlipClock.Lang[t.ucfirst()]:FlipClock.Lang[t]?FlipClock.Lang[t]:FlipClock.Lang[this.defaultLanguage]},localize:function(t,i){var s=this.lang;if(!t)return null;var e=t.toLowerCase();return"object"==typeof i&&(s=i),s&&s[e]?s[e]:t},start:function(t){var i=this;i.running||i.countdown&&!(i.countdown&&i.time.time>0)?i.log("Trying to start timer when countdown already at 0"):(i.face.start(i.time),i.timer.start(function(){i.flip(),"function"==typeof t&&t()}))},stop:function(t){this.face.stop(),this.timer.stop(t);for(var i in this.lists)this.lists.hasOwnProperty(i)&&this.lists[i].stop()},reset:function(t){this.timer.reset(t),this.face.reset()},setTime:function(t){this.time.time=t,this.face.setTime(t)},getTime:function(){return this.time},setCountdown:function(t){var i=this.running;this.countdown=t?!0:!1,i&&(this.stop(),this.start())},flip:function(){this.face.flip()}}),FlipClock.Face=FlipClock.Base.extend({dividers:[],factory:!1,lists:[],constructor:function(t,i){this.base(i),this.factory=t,this.dividers=[]},build:function(){},createDivider:function(i,s,e){"boolean"!=typeof s&&s||(e=s,s=i);var n=['<span class="'+this.factory.classes.dot+' top"></span>','<span class="'+this.factory.classes.dot+' bottom"></span>'].join("");e&&(n=""),i=this.factory.localize(i);var a=['<span class="'+this.factory.classes.divider+" "+(s?s:"").toLowerCase()+'">','<span class="'+this.factory.classes.label+'">'+(i?i:"")+"</span>",n,"</span>"];return t(a.join(""))},createList:function(t,i){"object"==typeof t&&(i=t,t=0);var s=new FlipClock.List(this.factory,t,i);return s},reset:function(){},setTime:function(t){this.flip(t)},addDigit:function(t){var i=this.createList(t,{classes:{active:this.factory.classes.active,before:this.factory.classes.before,flip:this.factory.classes.flip}});i.$obj.insertBefore(this.factory.lists[0].$obj),this.factory.lists.unshift(i)},start:function(){},stop:function(){},flip:function(i,s){var e=this;s||(e.factory.countdown?(e.factory.time.time<=0&&e.factory.stop(),e.factory.time.time--):e.factory.time.time++);var n=e.factory.lists.length-i.length;0>n&&(n=0);var a=!1;t.each(i,function(t,i){t+=n;var o=e.factory.lists[t];if(o){var c=o.digit;o.select(i),i==c||s||o.play()}else e.addDigit(i),a=!0});for(var o=0;o<i.length;o++)o>=n&&e.factory.lists[o].digit!=i[o]&&e.factory.lists[o].select(i[o])}}),FlipClock.List=FlipClock.Base.extend({digit:0,classes:{active:"flip-clock-active",before:"flip-clock-before",flip:"flip"},factory:!1,$obj:!1,items:[],constructor:function(t,i){this.factory=t,this.digit=i,this.$obj=this.createList(),i>0&&this.select(i),this.factory.$wrapper.append(this.$obj)},select:function(t){"undefined"==typeof t?t=this.digit:this.digit=t;{var i=this.$obj.find('[data-digit="'+t+'"]');this.$obj.find("."+this.classes.active).removeClass(this.classes.active),this.$obj.find("."+this.classes.before).removeClass(this.classes.before)}this.factory.countdown?i.is(":last-child")?this.$obj.find(":first-child").addClass(this.classes.before):i.next().addClass(this.classes.before):i.is(":first-child")?this.$obj.find(":last-child").addClass(this.classes.before):i.prev().addClass(this.classes.before),i.addClass(this.classes.active)},play:function(){this.$obj.addClass(this.factory.classes.play)},stop:function(){var t=this;setTimeout(function(){t.$obj.removeClass(t.factory.classes.play)},this.factory.timer.interval)},createList:function(){for(var i=t('<ul class="'+this.classes.flip+" "+(this.factory.running?this.factory.classes.play:"")+'" />'),s=0;10>s;s++){var e=t(['<li data-digit="'+s+'">','<a href="#">','<div class="up">','<div class="shadow"></div>','<div class="inn">'+s+"</div>","</div>",'<div class="down">','<div class="shadow"></div>','<div class="inn">'+s+"</div>","</div>","</a>","</li>"].join(""));this.items.push(e),i.append(e)}return i}}),FlipClock.Time=FlipClock.Base.extend({minimumDigits:0,time:0,factory:!1,constructor:function(t,i,s){this.base(s),this.factory=t,i&&(this.time=i)},convertDigitsToArray:function(t){var i=[];t=t.toString();for(var s=0;s<t.length;s++)t[s].match(/^\d*$/g)&&i.push(t[s]);return i},digit:function(t){var i=this.toString(),s=i.length;return i[s-t]?i[s-t]:!1},digitize:function(i){var s=[];return t.each(i,function(t,i){i=i.toString(),1==i.length&&(i="0"+i);for(var e=0;e<i.length;e++)s.push(i.charAt(e))}),s.length>this.minimumDigits&&(this.minimumDigits=s.length),this.minimumDigits>s.length&&s.unshift("0"),s},getDayCounter:function(t){var i=[this.getDays(),this.getHours(!0),this.getMinutes(!0)];return t&&i.push(this.getSeconds(!0)),this.digitize(i)},getDays:function(t){var i=this.time/60/60/24;return t&&(i%=7),Math.floor(i)},getHourCounter:function(){var t=this.digitize([this.getHours(),this.getMinutes(!0),this.getSeconds(!0)]);return t},getHourly:function(){return this.getHourCounter()},getHours:function(t){var i=this.time/60/60;return t&&(i%=24),Math.floor(i)},getMilitaryTime:function(){var t=new Date,i=this.digitize([t.getHours(),t.getMinutes(),t.getSeconds()]);return i},getMinutes:function(t){var i=this.time/60;return t&&(i%=60),Math.floor(i)},getMinuteCounter:function(){var t=this.digitize([this.getMinutes(),this.getSeconds(!0)]);return t},getSeconds:function(t){var i=this.time;return t&&(60==i?i=0:i%=60),Math.ceil(i)},getTime:function(){var t=new Date,i=t.getHours(),s=this.digitize([i>12?i-12:0===i?12:i,t.getMinutes(),t.getSeconds()]);return s},getWeeks:function(){var t=this.time/60/60/24/7;return mod&&(t%=52),Math.floor(t)},removeLeadingZeros:function(i,s){var e=0,n=[];return t.each(s,function(t){i>t?e+=parseInt(s[t],10):n.push(s[t])}),0===e?n:s},toString:function(){return this.time.toString()}}),FlipClock.Timer=FlipClock.Base.extend({callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},count:0,factory:!1,interval:1e3,constructor:function(t,i){this.base(i),this.factory=t,this.callback(this.callbacks.init),this.callback(this.callbacks.create)},getElapsed:function(){return this.count*this.interval},getElapsedTime:function(){return new Date(this.time+this.getElapsed())},reset:function(t){clearInterval(this.timer),this.count=0,this._setInterval(t),this.callback(this.callbacks.reset)},start:function(t){this.factory.running=!0,this._createTimer(t),this.callback(this.callbacks.start)},stop:function(t){this.factory.running=!1,this._clearInterval(t),this.callback(this.callbacks.stop),this.callback(t)},_clearInterval:function(){clearInterval(this.timer)},_createTimer:function(t){this._setInterval(t)},_destroyTimer:function(t){this._clearInterval(),this.timer=!1,this.callback(t),this.callback(this.callbacks.destroy)},_interval:function(t){this.callback(this.callbacks.interval),this.callback(t),this.count++},_setInterval:function(t){var i=this;i.timer=setInterval(function(){i._interval(t)},this.interval)}}),String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},t.fn.FlipClock=function(i,s){return"object"==typeof i&&(s=i,i=0),new FlipClock(t(this),i,s)},t.fn.flipClock=function(i,s){return t.fn.FlipClock(i,s)}}(jQuery);